# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏

## üéØ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–≠—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç **18 –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥—ã—Ä**, –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –≤ –∞–Ω–∞–ª–∏–∑–µ. –û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (CRITICAL)
1. ‚úÖ **#1 - Device Renaming**: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Ç–µ–ø–µ—Ä—å –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
2. ‚úÖ **#2 - Physical Deletion**: –î–æ–±–∞–≤–ª–µ–Ω–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ—Å–ª–µ N –¥–Ω–µ–π –≤ decommissioning
3. ‚úÖ **#3 - Orphaned IPs**: –°—Ç–∞—Ä—ã–µ IP –∞–¥—Ä–µ—Å–∞ —Ç–µ–ø–µ—Ä—å –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
4. ‚úÖ **#4 - Protected Fields**: –ú–æ–∂–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å –ø–æ–ª—è –æ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏
5. ‚úÖ **#5 - Rack Conflicts**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ–∑–∏—Ü–∏–π –≤ —Å—Ç–æ–π–∫–∞—Ö

### üü° –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (HIGH)
6. ‚úÖ **#6 - Site Fallback**: –ï—Å–ª–∏ Site –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è DEFAULT_SITE
7. ‚úÖ **#11 - Manufacturer Normalization**: –£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π
8. ‚úÖ **#13 - Status Recovery**: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ decommissioning

---

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é

### 1. –°–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø –±–∞–∑—ã NetBox

```bash
# PostgreSQL
pg_dump netbox > /backup/netbox_backup_$(date +%Y%m%d_%H%M%S).sql

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker exec netbox-postgres pg_dump -U netbox netbox > /backup/netbox_backup_$(date +%Y%m%d_%H%M%S).sql
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
redis-cli SAVE
cp /var/lib/redis/dump.rdb /backup/redis_backup_$(date +%Y%m%d_%H%M%S).rdb
```

### 3. –°–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞

```bash
cd /home/user/prods-z-n
git stash  # –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git checkout -b backup-before-fixes
git push origin backup-before-fixes
```

---

## üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥

```bash
cd /home/user/prods-z-n
git pull origin claude/project-logic-analysis-011CV5GjbVGGhUPFT3uuevqp
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª

–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ .env.example
cat .env.example | grep -A 30 "–ù–ê–°–¢–†–û–ô–ö–ò –£–î–ê–õ–ï–ù–ò–Ø" >> .env.new

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ
nano .env.new

# –ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ä—ã–π .env
mv .env .env.backup
mv .env.new .env
```

–ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤—Ä—É—á–Ω—É—é:

```bash
# –ù–ê–°–¢–†–û–ô–ö–ò –£–î–ê–õ–ï–ù–ò–Ø (FIX #2)
DECOMMISSION_AFTER_DAYS=30
DELETE_AFTER_DECOMMISSION_DAYS=90
ENABLE_PHYSICAL_DELETION=false  # –í–ê–ñ–ù–û: –û—Å—Ç–∞–≤—å—Ç–µ false –¥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!

# –ó–ê–©–ò–¢–ê –î–ê–ù–ù–´–• (FIX #4)
PROTECTED_FIELDS=
PROTECTED_CUSTOM_FIELDS=

# –ù–ê–°–¢–†–û–ô–ö–ò –û–ß–ò–°–¢–ö–ò (FIX #3)
ORPHANED_IP_ACTION=deprecated

# –ü–†–û–í–ï–†–ö–ò (FIX #5)
CHECK_RACK_CONFLICTS=true
```

### –®–∞–≥ 3: –î–æ–±–∞–≤—å—Ç–µ custom field –≤ NetBox

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û**: –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ –ø–æ–ª–µ `decommissioned_date` –≤ NetBox UI:

1. –ó–∞–π–¥–∏—Ç–µ –≤ NetBox UI
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Customization** ‚Üí **Custom Fields** ‚Üí **Add**
3. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–µ:
   - **Name**: `decommissioned_date`
   - **Type**: `Date`
   - **Content Types**: `dcim > device`
   - **Description**: `–î–∞—Ç–∞ –∫–æ–≥–¥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –±—ã–ª–æ –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ decommissioning`
   - **Required**: ‚ùå (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –≤ DRY_RUN —Ä–µ–∂–∏–º–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ DRY_RUN –≤ .env
echo "DRY_RUN=true" > .env.test
cat .env >> .env.test
mv .env.test .env

# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
DRY_RUN=true python main.py --verbose
```

**–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏—Ç–µ –≤—ã–≤–æ–¥:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥—É–±–ª–∏–∫–∞—Ç—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å—Ç–æ–µ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ decommissioning

### –®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ production —Ä–µ–∂–∏–º–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ DRY_RUN=false
sed -i 's/DRY_RUN=true/DRY_RUN=false/' .env

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
python main.py

# –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -f logs/sync.log
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –ª–æ–≥–∞—Ö:

```bash
# –°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
grep "üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏" logs/sync.log -A 20 | tail -20
```

–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
- üîÑ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ
- ‚Ü©Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏–∑ decommissioning
- ‚ö†Ô∏è –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ–∑–∏—Ü–∏–π –≤ —Å—Ç–æ–π–∫–∞—Ö

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ NetBox UI:

1. **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è**: –ò—â–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã
2. **Orphaned IPs**: –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ IPAM ‚Üí IP Addresses ‚Üí –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É "deprecated"
3. **Custom field**: –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ ‚Üí Custom Fields ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `decommissioned_date`

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### 1. –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –ø–æ–ª—è (FIX #4)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∑–∞—â–∏—Ç–∏—Ç—å –ø–æ–ª—è –æ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏:

```bash
# –í .env –¥–æ–±–∞–≤—å—Ç–µ:
PROTECTED_FIELDS=comments,description
PROTECTED_CUSTOM_FIELDS=manual_notes,warranty_date
```

–¢–µ–ø–µ—Ä—å —ç—Ç–∏ –ø–æ–ª—è **–ù–ï –±—É–¥—É—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ã** –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

### 2. Orphaned IP –∞–¥—Ä–µ—Å–∞ (FIX #3)

–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–ª—è —Å—Ç–∞—Ä—ã—Ö IP:

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–º–µ—á–∞—Ç—å –∫–∞–∫ deprecated (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
ORPHANED_IP_ACTION=deprecated

# –í–∞—Ä–∏–∞–Ω—Ç 2: –£–¥–∞–ª—è—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏
ORPHANED_IP_ACTION=delete

# –í–∞—Ä–∏–∞–Ω—Ç 3: –û—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
ORPHANED_IP_ACTION=keep
```

### 3. –§–∏–∑–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (FIX #2)

**–û–°–¢–û–†–û–ñ–ù–û!** –í–∫–ª—é—á–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
# –®–∞–≥ 1: –û—Å—Ç–∞–≤—å—Ç–µ –≤—ã–∫–ª—é—á–µ–Ω–Ω—ã–º –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ —á—Ç–æ –ø–æ–ø–∞–¥–µ—Ç –≤ decommissioning
ENABLE_PHYSICAL_DELETION=false

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
grep "decommissioning" logs/sync.log

# –®–∞–≥ 2: –ï—Å–ª–∏ —É–≤–µ—Ä–µ–Ω—ã, –≤–∫–ª—é—á–∏—Ç–µ (—á–µ—Ä–µ–∑ 90 –¥–Ω–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã)
ENABLE_PHYSICAL_DELETION=true
DELETE_AFTER_DECOMMISSION_DAYS=90  # –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–∏–æ–¥
```

### 4. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å—Ç–æ–µ–∫ (FIX #5)

–ï—Å–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ—à–∞—é—Ç:

```bash
# –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
CHECK_RACK_CONFLICTS=false

# –ò–ª–∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤—Ä—É—á–Ω—É—é –≤ NetBox UI
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:

```bash
# 1. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
grep "üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ" logs/sync.log

# 2. Orphaned IP
grep "–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ IP" logs/sync.log

# 3. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å—Ç–æ–µ–∫
grep "–ö–û–ù–§–õ–ò–ö–¢" logs/sync.log

# 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
grep "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏–∑ decommissioning" logs/sync.log

# 5. –§–∏–∑–∏—á–µ—Å–∫–∏–µ —É–¥–∞–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
grep "–£–î–ê–õ–ï–ù–û —Ñ–∏–∑–∏—á–µ—Å–∫–∏" logs/sync.log
```

### –°–æ–∑–¥–∞–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –≤ Telegram

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Telegram Bot, –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ:
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö —Å—Ç–æ–µ–∫
- –§–∏–∑–∏—á–µ—Å–∫–∏—Ö —É–¥–∞–ª–µ–Ω–∏—è—Ö (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Custom field decommissioned_date not found"

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ –≤ NetBox UI (—Å–º. –®–∞–≥ 3)

```bash
# –ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ ENABLE_PHYSICAL_DELETION –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–∏—Ç–µ –ø–æ–ª–µ
ENABLE_PHYSICAL_DELETION=false
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Device renamed but duplicate still exists"

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –∏–º–µ–µ—Ç `zabbix_hostid`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–¥–∏–Ω —Ä–∞–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é - –æ–Ω–∞ –¥–æ–±–∞–≤–∏—Ç hostid –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
# –ó–∞—Ç–µ–º –ø—Ä–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ –¥—É–±–ª–∏–∫–∞—Ç –Ω–µ —Å–æ–∑–¥–∞—Å—Ç—Å—è
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Rack conflicts detected"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ Zabbix (inventory ‚Üí software_app_b, location_lon)
2. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤—Ä—É—á–Ω—É—é –≤ NetBox UI
3. –ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É: `CHECK_RACK_CONFLICTS=false`

### –ü—Ä–æ–±–ª–µ–º–∞: "Protected field not working"

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤):
PROTECTED_FIELDS=field1,field2,field3

# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
PROTECTED_FIELDS=field1, field2, field3  # –ü—Ä–æ–±–µ–ª—ã!
```

---

## üîÑ –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

```bash
# –ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–∞ —á–µ—Ä–µ–∑ cron
crontab -e
# –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É
```

### 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∞–∑—É NetBox

```bash
# –ù–∞–π–¥–∏—Ç–µ –±—ç–∫–∞–ø
ls -lh /backup/netbox_backup_*

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
psql netbox < /backup/netbox_backup_20251113_100000.sql

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker exec -i netbox-postgres psql -U netbox netbox < /backup/netbox_backup_20251113_100000.sql
```

### 3. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ —Å—Ç–∞—Ä—ã–π –∫–æ–¥

```bash
cd /home/user/prods-z-n
git checkout backup-before-fixes
```

---

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

1. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ 1-2 –Ω–µ–¥–µ–ª–∏
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ protected fields –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
3. ‚úÖ –ß–µ—Ä–µ–∑ 1 –º–µ—Å—è—Ü –≤–∫–ª—é—á–∏—Ç–µ ENABLE_PHYSICAL_DELETION (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
4. ‚úÖ –î–æ–±–∞–≤—å—Ç–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -100 logs/sync.log`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å --verbose: `python main.py --verbose`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ custom fields –≤ NetBox UI

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

1. **–í–°–ï–ì–î–ê –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º!**
2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ DRY_RUN —Ä–µ–∂–∏–º–µ!**
3. **–ù–ï –≤–∫–ª—é—á–∞–π—Ç–µ ENABLE_PHYSICAL_DELETION –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!**
4. **–î–æ–±–∞–≤—å—Ç–µ custom field decommissioned_date –î–û –∑–∞–ø—É—Å–∫–∞!**
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º!**

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-13
**–í–µ—Ä—Å–∏—è:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥—ã—Ä v1.0
**–ê–≤—Ç–æ—Ä:** Claude Code Analysis
